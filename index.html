<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LTC LEAKS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0c15 0%, #121624 100%);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            color: #eef2f6;
            overflow-x: hidden;
            transition: all 0.3s;
        }

        .devtools-alert {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0a0c15;
            z-index: 999999;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: #fff;
            font-family: monospace;
            text-align: center;
            padding: 20px;
        }

        .app {
            width: 100%;
            max-width: 1600px;
            background: rgba(15, 20, 28, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 32px;
            overflow: hidden;
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .header {
            padding: 20px 24px;
            background: rgba(10, 14, 20, 0.6);
            border-bottom: 1px solid rgba(59,130,246,0.2);
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .header h1 {
            font-size: 28px;
            font-weight: 600;
            background: linear-gradient(135deg, #fff, #a0b8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-right {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .status {
            background: rgba(30, 40, 60, 0.6);
            border: 1px solid rgba(59,130,246,0.3);
            padding: 6px 16px;
            border-radius: 40px;
            color: #a0b8ff;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .version {
            background: rgba(30, 40, 60, 0.6);
            border: 1px solid rgba(59,130,246,0.3);
            padding: 6px 16px;
            border-radius: 40px;
            color: #a0b8ff;
            font-size: 13px;
        }

        .tabs {
            display: flex;
            padding: 0 24px;
            background: rgba(10, 14, 20, 0.6);
            border-bottom: 1px solid rgba(59,130,246,0.15);
            gap: 2px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 16px 24px;
            background: transparent;
            border: none;
            color: #8a9bb5;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            position: relative;
        }

        .tab:hover {
            color: #fff;
        }

        .tab.active {
            color: #fff;
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 20px;
            right: 20px;
            height: 2px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }

        .panel {
            display: none;
            padding: 24px;
        }

        .panel.active {
            display: block;
        }

        .login-card {
            max-width: 400px;
            margin: 40px auto;
            background: rgba(15, 20, 28, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 28px;
            padding: 32px;
        }

        .login-card h2 {
            color: #fff;
            font-size: 24px;
            font-weight: 500;
            margin-bottom: 24px;
            text-align: center;
        }

        .login-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            background: rgba(10, 14, 20, 0.6);
            padding: 4px;
            border-radius: 30px;
        }

        .login-tab {
            flex: 1;
            background: transparent;
            border: none;
            color: #8a9bb5;
            padding: 12px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 14px;
        }

        .login-tab:hover {
            color: #fff;
        }

        .login-tab.active {
            background: rgba(59,130,246,0.2);
            color: #fff;
        }

        .field {
            margin-bottom: 20px;
        }

        .field label {
            display: block;
            color: #a0b8ff;
            font-size: 12px;
            margin-bottom: 6px;
        }

        .field input {
            width: 100%;
            background: rgba(10, 14, 20, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            padding: 14px 16px;
            color: #fff;
            border-radius: 14px;
            font-size: 14px;
        }

        button {
            background: rgba(30, 40, 60, 0.8);
            border: 1px solid rgba(59,130,246,0.3);
            color: #fff;
            padding: 14px 24px;
            border-radius: 14px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        button:hover {
            background: rgba(40, 50, 70, 0.9);
        }

        button.primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: none;
        }

        button.small {
            padding: 10px 16px;
            font-size: 13px;
        }

        button.danger {
            background: rgba(239,68,68,0.15);
            border-color: rgba(239,68,68,0.3);
            color: #ffb0b0;
        }

        .user-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .user-grid {
                grid-template-columns: 1fr;
            }
        }

        .sidebar {
            background: rgba(15, 20, 28, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 24px;
            padding: 24px;
        }

        .avatar {
            width: 100px;
            height: 100px;
            background: #1e2530;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: #a0b8ff;
        }

        .user-name {
            font-size: 20px;
            font-weight: 600;
            text-align: center;
            color: #fff;
        }

        .user-email {
            color: #a0b8ff;
            text-align: center;
            font-size: 13px;
            margin-bottom: 20px;
        }

        .license-box {
            margin: 20px 0;
            padding: 20px 0;
            border-top: 1px solid rgba(59,130,246,0.2);
            border-bottom: 1px solid rgba(59,130,246,0.2);
        }

        .license-box input {
            width: 100%;
            background: rgba(10, 14, 20, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            padding: 12px;
            border-radius: 14px;
            color: #fff;
            text-align: center;
            margin-bottom: 12px;
        }

        .stats {
            margin-top: 20px;
        }

        .stat {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(59,130,246,0.1);
            color: #a0b8ff;
        }

        .stat:last-child {
            border-bottom: none;
        }

        .stat span {
            color: #fff;
        }

        .main-panel {
            background: rgba(15, 20, 28, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 24px;
            padding: 24px;
        }

        .main-panel h3 {
            color: #fff;
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(59,130,246,0.2);
        }

        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 16px;
        }

        .file-card {
            background: rgba(10, 14, 20, 0.6);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 18px;
            padding: 20px;
        }

        .file-name {
            color: #fff;
            font-weight: 500;
            margin-bottom: 6px;
        }

        .file-meta {
            color: #a0b8ff;
            font-size: 12px;
            margin-bottom: 16px;
        }

        .file-actions {
            display: flex;
            gap: 8px;
        }

        .file-actions button {
            flex: 1;
            padding: 10px;
            font-size: 12px;
        }

        .guide {
            background: rgba(15, 20, 28, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 24px;
            padding: 24px;
        }

        .guide h3 {
            color: #fff;
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .guide-steps {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        @media (max-width: 600px) {
            .guide-steps {
                grid-template-columns: 1fr;
            }
        }

        .step {
            background: rgba(10, 14, 20, 0.6);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 18px;
            padding: 20px;
        }

        .step .title {
            color: #fff;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .step .desc {
            color: #a0b8ff;
            font-size: 13px;
            line-height: 1.5;
        }

        .admin-container {
            background: rgba(15, 20, 28, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 24px;
            padding: 24px;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        @media (max-width: 1000px) {
            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .stat-card {
            background: rgba(10, 14, 20, 0.6);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 18px;
            padding: 20px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 32px;
            font-weight: 600;
            color: #3b82f6;
            margin-bottom: 4px;
        }

        .stat-card .label {
            color: #a0b8ff;
            font-size: 13px;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }

        @media (max-width: 1100px) {
            .admin-grid {
                grid-template-columns: 1fr;
            }
        }

        .admin-card {
            background: rgba(10, 14, 20, 0.6);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 20px;
            padding: 20px;
        }

        .admin-card h4 {
            color: #fff;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(59,130,246,0.2);
        }

        .duration-selector {
            display: flex;
            gap: 8px;
            margin: 16px 0;
            flex-wrap: wrap;
        }

        .duration-btn {
            flex: 1;
            min-width: 50px;
            padding: 10px;
            background: rgba(10, 14, 20, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            color: #a0b8ff;
            border-radius: 30px;
            text-align: center;
            font-size: 12px;
            cursor: pointer;
        }

        .duration-btn:hover {
            background: rgba(59,130,246,0.1);
            color: #fff;
        }

        .duration-btn.active {
            background: #3b82f6;
            color: #fff;
        }

        .items-list {
            margin-top: 16px;
            max-height: 250px;
            overflow-y: auto;
        }

        .item-row {
            background: rgba(15, 20, 30, 0.8);
            border: 1px solid rgba(59,130,246,0.15);
            border-radius: 16px;
            padding: 14px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-code {
            color: #3b82f6;
            font-family: monospace;
            font-size: 13px;
            margin-bottom: 2px;
        }

        .item-info {
            color: #a0b8ff;
            font-size: 11px;
        }

        .upload-box {
            border: 2px dashed rgba(59,130,246,0.3);
            border-radius: 18px;
            padding: 24px;
            text-align: center;
            cursor: pointer;
            margin: 16px 0;
        }

        .upload-box:hover {
            border-color: #3b82f6;
        }

        .upload-box p {
            color: #a0b8ff;
            font-size: 13px;
        }

        .add-admin-section {
            background: rgba(10, 14, 20, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 22px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .add-admin-section h4 {
            color: #fff;
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .admin-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 16px;
            align-items: flex-end;
        }

        @media (max-width: 1000px) {
            .admin-form {
                grid-template-columns: 1fr;
            }
        }

        .admin-form .field {
            margin: 0;
        }

        .users-section {
            margin-top: 24px;
        }

        .users-section h4 {
            color: #fff;
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 16px;
        }

        .users-table {
            background: rgba(10, 14, 20, 0.8);
            border: 1px solid rgba(59,130,246,0.2);
            border-radius: 20px;
            overflow: hidden;
        }

        .table-header {
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr 1.2fr 1fr 0.8fr 1fr;
            background: rgba(20, 28, 38, 0.8);
            padding: 14px 18px;
            color: #a0b8ff;
            font-size: 12px;
            border-bottom: 1px solid rgba(59,130,246,0.2);
        }

        .user-row {
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr 1.2fr 1fr 0.8fr 1fr;
            padding: 12px 18px;
            border-bottom: 1px solid rgba(59,130,246,0.1);
            align-items: center;
            font-size: 12px;
        }

        .user-row:last-child {
            border-bottom: none;
        }

        .user-row .role-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 16px;
            font-size: 10px;
            font-weight: 600;
        }

        .role-badge.ceo {
            background: #ffd700;
            color: #000;
        }

        .role-badge.admin {
            background: #3b82f6;
            color: #fff;
        }

        .role-badge.user {
            background: #475569;
            color: #fff;
        }

        .user-row .ip {
            color: #3b82f6;
            font-family: monospace;
            font-size: 11px;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(20, 28, 38, 0.9);
            border: 1px solid rgba(59,130,246,0.3);
            color: #fff;
            padding: 12px 24px;
            border-radius: 40px;
            font-size: 14px;
            z-index: 3000;
            opacity: 0;
            transition: 0.2s;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .footer {
            padding: 20px 24px;
            border-top: 1px solid rgba(59,130,246,0.15);
            background: rgba(10, 14, 20, 0.6);
            display: flex;
            justify-content: space-between;
            color: #a0b8ff;
            font-size: 13px;
        }

        .footer a {
            color: #a0b8ff;
            text-decoration: none;
        }

        @media (max-width: 1200px) {
            .table-header {
                display: none;
            }
            .user-row {
                grid-template-columns: 1fr;
                gap: 8px;
                padding: 16px;
            }
            .user-row > div {
                display: flex;
                justify-content: space-between;
            }
            .user-row > div:before {
                content: attr(data-label);
                color: #a0b8ff;
                font-weight: 500;
            }
        }
    </style>
</head>
<body>
    <div id="devtools-check" style="display:none"></div>
    <div class="app">
        <div class="header">
            <h1>LTC LEAKS</h1>
            <div class="header-right">
                <div class="status">system online</div>
                <div class="version">2026</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('user')">U≈ªYTKOWNIK</button>
            <button class="tab" onclick="switchTab('pwa')">APLIKACJA</button>
            <button class="tab" onclick="switchTab('admin')">ADMIN</button>
        </div>

        <div class="toast" id="toast"></div>

        <div id="userPanel" class="panel active">
            <div id="userAuth">
                <div class="login-card">
                    <div class="login-tabs">
                        <button class="login-tab active" onclick="switchLogin('login')">logowanie</button>
                        <button class="login-tab" onclick="switchLogin('register')">rejestracja</button>
                    </div>

                    <div id="loginForm">
                        <div class="field">
                            <label>email</label>
                            <input type="email" id="loginEmail" placeholder="twoj@email.com">
                        </div>
                        <div class="field">
                            <label>has≈Ço</label>
                            <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <button class="primary" onclick="userLogin()" style="width:100%">zaloguj</button>
                    </div>

                    <div id="registerForm" style="display:none">
                        <div class="field">
                            <label>nazwa</label>
                            <input type="text" id="registerName" placeholder="janek123">
                        </div>
                        <div class="field">
                            <label>email</label>
                            <input type="email" id="registerEmail" placeholder="twoj@email.com">
                        </div>
                        <div class="field">
                            <label>has≈Ço</label>
                            <input type="password" id="registerPassword" placeholder="min 6 znak√≥w">
                        </div>
                        <button class="primary" onclick="userRegister()" style="width:100%">zarejestruj</button>
                    </div>
                </div>
            </div>

            <div id="userDashboard" style="display:none">
                <div class="user-grid">
                    <div class="sidebar">
                        <div class="avatar">üë§</div>
                        <div class="user-name" id="userDisplayName">-</div>
                        <div class="user-email" id="userDisplayEmail">-</div>

                        <div class="license-box" id="licenseBox">
                            <input type="text" id="licenseKeyInput" placeholder="klucz licencji">
                            <button onclick="activateLicense()" style="width:100%">aktywuj</button>
                        </div>

                        <div class="stats" id="userStats" style="display:none">
                            <div class="stat">
                                <span>klucz</span>
                                <span id="userLicenseKey">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                            </div>
                            <div class="stat">
                                <span>status</span>
                                <span id="userLicenseStatus">aktywna</span>
                            </div>
                            <div class="stat">
                                <span>wa≈ºny do</span>
                                <span id="userLicenseExpiry">-</span>
                            </div>
                            <div class="stat">
                                <span>pobra≈Ñ</span>
                                <span id="userDownloads">0</span>
                            </div>
                        </div>

                        <button class="small danger" onclick="userLogout()" style="width:100%; margin-top:20px">wyloguj</button>
                    </div>

                    <div class="main-panel" id="userMain" style="display:none">
                        <h3>pliki</h3>
                        <div class="files-grid" id="filesGrid"></div>
                    </div>

                    <div class="main-panel" id="noLicense">
                        <h3>pliki</h3>
                        <div style="text-align:center; padding:60px 20px; color:#a0b8ff">
                            <p>wpisz klucz licencji</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="pwaPanel" class="panel">
            <div class="guide">
                <h3>jak zainstalowaƒá jako aplikacjƒô</h3>
                <div class="guide-steps">
                    <div class="step">
                        <div class="title">iPhone/iPad</div>
                        <div class="desc">Udostƒôpnij ‚Üí Dodaj do ekranu g≈Ç√≥wnego</div>
                    </div>
                    <div class="step">
                        <div class="title">Android</div>
                        <div class="desc">Menu ‚Üí Dodaj do ekranu g≈Ç√≥wnego</div>
                    </div>
                    <div class="step">
                        <div class="title">Komputer</div>
                        <div class="desc">Ikonka instalacji w pasku adresu</div>
                    </div>
                    <div class="step">
                        <div class="title">Inne</div>
                        <div class="desc">Szukaj "Zainstaluj aplikacjƒô"</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="adminPanel" class="panel">
            <div id="adminAuth">
                <div class="login-card">
                    <h2>panel administratora</h2>
                    <div class="field">
                        <label>has≈Ço</label>
                        <input type="password" id="adminPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button class="primary" onclick="adminLogin()" style="width:100%">zaloguj</button>
                </div>
            </div>

            <div id="adminDashboard" style="display:none">
                <div class="admin-container">
                    <div class="admin-stats">
                        <div class="stat-card">
                            <div class="number" id="adminFilesCount">0</div>
                            <div class="label">pliki</div>
                        </div>
                        <div class="stat-card">
                            <div class="number" id="adminKeysCount">0</div>
                            <div class="label">klucze</div>
                        </div>
                        <div class="stat-card">
                            <div class="number" id="adminUsersCount">0</div>
                            <div class="label">u≈ºytkownicy</div>
                        </div>
                        <div class="stat-card">
                            <div class="number" id="adminCouponsCount">0</div>
                            <div class="label">kody</div>
                        </div>
                    </div>

                    <div class="add-admin-section">
                        <h4>‚ûï dodaj administratora</h4>
                        <div class="admin-form">
                            <div class="field">
                                <label>email</label>
                                <input type="email" id="newAdminEmail" placeholder="admin@example.com">
                            </div>
                            <div class="field">
                                <label>imiƒô</label>
                                <input type="text" id="newAdminName" placeholder="Jan Kowalski">
                            </div>
                            <div class="field">
                                <label>ranga</label>
                                <select id="newAdminRole">
                                    <option value="admin">Administrator</option>
                                    <option value="ceo">CEO</option>
                                </select>
                            </div>
                            <button onclick="createAdmin()" class="primary">utw√≥rz</button>
                        </div>
                    </div>

                    <div class="admin-grid">
                        <div class="admin-card">
                            <h4>klucze</h4>
                            <div class="field">
                                <input type="text" id="licenseName" placeholder="nazwa">
                            </div>
                            <div class="duration-selector">
                                <button class="duration-btn active" onclick="selectDuration(7, this)">7</button>
                                <button class="duration-btn" onclick="selectDuration(14, this)">14</button>
                                <button class="duration-btn" onclick="selectDuration(30, this)">30</button>
                                <button class="duration-btn" onclick="selectDuration(90, this)">90</button>
                            </div>
                            <button onclick="generateKey()" style="width:100%">generuj</button>
                            <div class="items-list" id="keyList"></div>
                        </div>

                        <div class="admin-card">
                            <h4>kody</h4>
                            <div class="field">
                                <input type="text" id="couponCode" placeholder="kod">
                            </div>
                            <div class="field">
                                <input type="number" id="couponValue" placeholder="%">
                            </div>
                            <button onclick="generateCoupon()" style="width:100%">generuj</button>
                            <div class="items-list" id="couponList"></div>
                        </div>

                        <div class="admin-card">
                            <h4>upload</h4>
                            <div class="field">
                                <input type="text" id="fileName" placeholder="nazwa">
                            </div>
                            <div class="upload-box" onclick="document.getElementById('fileInput').click()">
                                <p>kliknij lub przeciƒÖgnij</p>
                                <input type="file" id="fileInput" style="display:none">
                            </div>
                            <div class="item-row" id="fileInfo" style="display:none"></div>
                            <button onclick="uploadFile()" style="width:100%; margin-top:12px" id="uploadBtn" disabled>publikuj</button>
                        </div>
                    </div>

                    <div class="users-section">
                        <h4>u≈ºytkownicy</h4>
                        <div class="users-table">
                            <div class="table-header">
                                <div>nazwa</div>
                                <div>email</div>
                                <div>ranga</div>
                                <div>ip</div>
                                <div>licencja</div>
                                <div>pobra≈Ñ</div>
                                <div>akcje</div>
                            </div>
                            <div id="adminUsersList"></div>
                        </div>
                    </div>

                    <div style="margin-top:24px">
                        <h4 style="color:#fff; margin-bottom:16px">wszystkie pliki</h4>
                        <div class="items-list" id="adminFilesList"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div>ltc leaks // 2026</div>
            <div><a href="#" onclick="showContact()">krvl_keine</a></div>
        </div>
    </div>

    <script>
        const BIN_ID = '699b66ea43b1c97be9947e2f';
        const API_KEY = '$2a$10$RjWg9.uyQvQcCa9ZYTAMhuEuljziWE3FW8Fr462VCzkw3zCjntw1C';
        const ADMIN_PASS = 'ltcadmin2024';
        const DISCORD_WEBHOOK = 'https://discord.com/api/webhooks/1475854232069476393/87gga4miy3_n9If6-Pr1nxeI4QnSB8HJaIm37g6Q5ErtGAcBatsaHSNdOJ6WxoVoMTtV';
        
        let files = [];
        let keys = [];
        let users = [];
        let coupons = [];
        let currentUser = null;
        let isAdmin = false;
        let selectedDays = 30;
        let uploadedFile = null;
        let userIP = 'nieznane';
        let dataLoaded = false;
        let devToolsBlocked = false;

        (function() {
            const blockDevTools = () => {
                if (devToolsBlocked) return;
                devToolsBlocked = true;
                
                const app = document.querySelector('.app');
                if (app) app.style.display = 'none';
                
                const alertDiv = document.createElement('div');
                alertDiv.className = 'devtools-alert';
                alertDiv.innerHTML = 'üîí DOSTƒòP ZABLOKOWANY<br><br>Wykryto narzƒôdzia deweloperskie<br><br>Strona zosta≈Ça zabezpieczona';
                document.body.appendChild(alertDiv);
                
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `üö® DEV TOOLS WYKRYTE! STRONA ZABLOKOWANA IP: ${userIP}` 
                    })
                });
            };

            setInterval(function() {
                if (devToolsBlocked) return;
                
                const start = performance.now();
                debugger;
                const end = performance.now();
                if (end - start > 100) {
                    blockDevTools();
                }
            }, 500);

            const element = new Image();
            Object.defineProperty(element, 'id', {
                get: function() {
                    blockDevTools();
                }
            });
            console.log(element);

            document.addEventListener('keydown', function(e) {
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') || 
                    (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                    (e.ctrlKey && e.key === 'U') ||
                    (e.ctrlKey && e.shiftKey && e.key === 'C')) {
                    e.preventDefault();
                    e.stopPropagation();
                    blockDevTools();
                    return false;
                }
            }, true);

            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                e.stopPropagation();
                blockDevTools();
            }, true);

            let lastWidth = window.innerWidth;
            let lastHeight = window.innerHeight;

            setInterval(function() {
                if (devToolsBlocked) return;
                
                const widthThreshold = window.outerWidth - window.innerWidth > 160;
                const heightThreshold = window.outerHeight - window.innerHeight > 160;
                
                if (widthThreshold || heightThreshold) {
                    blockDevTools();
                }

                if (window.innerWidth !== lastWidth || window.innerHeight !== lastHeight) {
                    lastWidth = window.innerWidth;
                    lastHeight = window.innerHeight;
                }
            }, 300);

            let consoleCalls = 0;
            const originalConsole = {
                log: console.log,
                info: console.info,
                warn: console.warn,
                error: console.error,
                debug: console.debug
            };

            console.log = function() {
                consoleCalls++;
                if (consoleCalls > 50) {
                    blockDevTools();
                }
                originalConsole.log.apply(console, arguments);
            };

            console.info = function() {
                consoleCalls++;
                if (consoleCalls > 50) blockDevTools();
                originalConsole.info.apply(console, arguments);
            };

            console.warn = function() {
                consoleCalls++;
                if (consoleCalls > 50) blockDevTools();
                originalConsole.warn.apply(console, arguments);
            };

            console.error = function() {
                consoleCalls++;
                if (consoleCalls > 50) blockDevTools();
                originalConsole.error.apply(console, arguments);
            };

            console.debug = function() {
                consoleCalls++;
                if (consoleCalls > 50) blockDevTools();
                originalConsole.debug.apply(console, arguments);
            };

            try {
                Object.defineProperty(window, 'console', {
                    get: function() {
                        blockDevTools();
                        return originalConsole;
                    }
                });
            } catch (e) {}

            const originalToString = Function.prototype.toString;
            Function.prototype.toString = function() {
                if (this.name === 'blockDevTools') return 'function blockDevTools() { [native code] }';
                return originalToString.apply(this, arguments);
            };
        })();

        let loginAttempts = {};
        let adminAttempts = {};
        
        function checkLoginAttempts(ip, type = 'user') {
            const now = Date.now();
            const attempts = type === 'user' ? loginAttempts : adminAttempts;
            
            if (!attempts[ip]) attempts[ip] = [];
            attempts[ip] = attempts[ip].filter(t => now - t < 15 * 60 * 1000);
            
            if (attempts[ip].length >= 5) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `üö´ RATE LIMIT DLA IP: ${ip} (${type})` 
                    })
                });
                return false;
            }
            
            attempts[ip].push(now);
            return true;
        }

        function validateInput(input) {
            if (!input || input.length > 100) return false;
            
            const sqlPattern = /(\b(SELECT|INSERT|DELETE|UPDATE|DROP|UNION|ALTER|CREATE|WHERE|FROM)\b)|('|--|#|\/\*)/i;
            if (sqlPattern.test(input)) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `üö® PR√ìBA SQL INJECTION: ${input} Z IP: ${userIP}` 
                    })
                });
                return false;
            }
            
            const xssPattern = /<script|javascript:|onerror|onload|onclick|onmouse/i;
            if (xssPattern.test(input)) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `üö® PR√ìBA XSS: ${input} Z IP: ${userIP}` 
                    })
                });
                return false;
            }
            
            return true;
        }

        async function logToDiscord(title, description, color = 0x3b82f6, fields = []) {
            try {
                const embed = {
                    title: title,
                    description: description,
                    color: color,
                    timestamp: new Date().toISOString(),
                    footer: { text: `IP: ${userIP}` },
                    fields: fields
                };
                
                await fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ embeds: [embed] })
                });
            } catch (e) {}
        }

        if (window.top !== window.self) {
            window.top.location = window.self.location;
            fetch(DISCORD_WEBHOOK, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    content: `üö® PR√ìBA CLICKJACKINGU Z IP: ${userIP}` 
                })
            });
        }

        document.cookie = "secure=1; SameSite=Strict; Secure";

        async function getUserIP() {
            try {
                let res = await fetch('https://api.ipify.org?format=json');
                let data = await res.json();
                userIP = data.ip;
            } catch (e) {
                try {
                    let res = await fetch('https://jsonip.com');
                    let data = await res.json();
                    userIP = data.ip;
                } catch (e) {
                    try {
                        let res = await fetch('https://www.cloudflare.com/cdn-cgi/trace');
                        let text = await res.text();
                        let match = text.match(/ip=(\d+\.\d+\.\d+\.\d+)/);
                        if (match) userIP = match[1];
                    } catch (e) {}
                }
            }
            logToDiscord('üåê Nowa sesja', 'U≈ºytkownik wszed≈Ç na stronƒô', 0x00ff00);
        }

        getUserIP();

        function escape(str) {
            if (!str) return '';
            return String(str).replace(/[&<>"']/g, function(m) {
                if (m === '&') return '&amp;';
                if (m === '<') return '&lt;';
                if (m === '>') return '&gt;';
                if (m === '"') return '&quot;';
                if (m === "'") return '&#039;';
                return m;
            });
        }

        function showToast(msg, type = 'info') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            
            if (tab === 'user') {
                document.querySelectorAll('.tab')[0].classList.add('active');
                document.getElementById('userPanel').classList.add('active');
            } else if (tab === 'pwa') {
                document.querySelectorAll('.tab')[1].classList.add('active');
                document.getElementById('pwaPanel').classList.add('active');
            } else {
                document.querySelectorAll('.tab')[2].classList.add('active');
                document.getElementById('adminPanel').classList.add('active');
            }
        }

        function switchLogin(mode) {
            document.querySelectorAll('.login-tab').forEach(b => b.classList.remove('active'));
            if (mode === 'login') {
                document.querySelectorAll('.login-tab')[0].classList.add('active');
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('registerForm').style.display = 'none';
            } else {
                document.querySelectorAll('.login-tab')[1].classList.add('active');
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'block';
            }
        }

        async function loadData() {
            try {
                let res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
                    headers: { 
                        'X-Master-Key': API_KEY, 
                        'X-Bin-Meta': false,
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                });
                if (!res.ok) throw new Error('b≈ÇƒÖd');
                let data = await res.json();
                
                files = data.files || [];
                keys = data.licenses || [];
                users = data.users || [];
                coupons = data.coupons || [];
                dataLoaded = true;
                
                updateUI();
                
                if (currentUser) {
                    let u = users.find(u => u.email === currentUser.email);
                    if (u) currentUser = u;
                }
            } catch (e) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `‚ùå B≈ÅƒÑD ≈ÅADOWANIA DANYCH: ${e}` 
                    })
                });
            }
        }

        async function saveData() {
            if (!dataLoaded) return;
            try {
                await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
                    method: 'PUT',
                    headers: { 
                        'Content-Type': 'application/json', 
                        'X-Master-Key': API_KEY,
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    body: JSON.stringify({ files, licenses: keys, users, coupons })
                });
            } catch (e) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `‚ùå B≈ÅƒÑD ZAPISU DANYCH: ${e}` 
                    })
                });
            }
            updateUI();
        }

        function updateUI() {
            if (isAdmin) {
                document.getElementById('adminFilesCount').textContent = files.length;
                document.getElementById('adminKeysCount').textContent = keys.length;
                document.getElementById('adminUsersCount').textContent = users.length;
                document.getElementById('adminCouponsCount').textContent = coupons.length;
                
                renderKeys();
                renderCoupons();
                renderAdminUsers();
                renderAdminFiles();
            }
        }

        function userRegister() {
            let name = escape(document.getElementById('registerName').value).trim();
            let email = escape(document.getElementById('registerEmail').value).trim().toLowerCase();
            let pass = document.getElementById('registerPassword').value;

            if (!name || !email || !pass) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `‚ùå NIEUDANA REJESTRACJA - PUSTE POLA Z IP: ${userIP}` 
                    })
                });
                return showToast('wype≈Çnij pola', 'error');
            }
            
            if (!validateInput(name) || !validateInput(email)) return showToast('niedozwolone znaki', 'error');
            
            if (!email.includes('@') || !email.includes('.')) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `‚ùå NIEUDANA REJESTRACJA - Z≈ÅY EMAIL: ${email} Z IP: ${userIP}` 
                    })
                });
                return showToast('z≈Çy email', 'error');
            }
            
            if (pass.length < 6) return showToast('has≈Ço za kr√≥tkie', 'error');
            if (users.find(u => u.email === email)) return showToast('email istnieje', 'error');

            users.push({
                name, email,
                password: btoa(pass),
                role: 'user',
                ip: userIP,
                license: null,
                downloads: 0,
                registered: new Date().toISOString().split('T')[0],
                lastLogin: null
            });

            logToDiscord('üÜï Nowy u≈ºytkownik', `**${name}** (${email}) do≈ÇƒÖczy≈Ç`, 0x00ff00, [
                { name: 'IP', value: userIP, inline: true }
            ]);

            saveData();
            showToast('zarejestrowano', 'success');
            switchLogin('login');
        }

        function userLogin() {
            if (!checkLoginAttempts(userIP, 'user')) {
                return showToast('za du≈ºo pr√≥b, spr√≥buj za 15 minut', 'error');
            }

            let email = escape(document.getElementById('loginEmail').value).trim().toLowerCase();
            let pass = document.getElementById('loginPassword').value;
            
            if (!validateInput(email)) return;

            let user = users.find(u => u.email === email && atob(u.password) === pass);

            if (!user) {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `‚ùå NIEUDANE LOGOWANIE NA KONTO ${email} Z IP: ${userIP}` 
                    })
                });
                return showToast('z≈Çe dane', 'error');
            }

            user.ip = userIP;
            user.lastLogin = new Date().toISOString();
            currentUser = user;

            document.getElementById('userAuth').style.display = 'none';
            document.getElementById('userDashboard').style.display = 'block';
            document.getElementById('userDisplayName').textContent = user.name;
            document.getElementById('userDisplayEmail').textContent = user.email;

            if (user.license) {
                let lic = keys.find(k => k.key === user.license);
                if (lic && new Date(lic.expires) > new Date()) showLicense(lic);
                else showLicenseInput();
            } else showLicenseInput();

            logToDiscord('‚úÖ Logowanie', `**${user.name}** (${user.role}) zalogowa≈Ç siƒô`, 0x00ff00, [
                { name: 'IP', value: userIP, inline: true }
            ]);

            saveData();
        }

        function showLicenseInput() {
            document.getElementById('licenseBox').style.display = 'block';
            document.getElementById('userStats').style.display = 'none';
            document.getElementById('userMain').style.display = 'none';
            document.getElementById('noLicense').style.display = 'block';
        }

        function showLicense(lic) {
            document.getElementById('licenseBox').style.display = 'none';
            document.getElementById('userStats').style.display = 'block';
            document.getElementById('userMain').style.display = 'block';
            document.getElementById('noLicense').style.display = 'none';
            
            document.getElementById('userLicenseKey').textContent = '‚Ä¢'.repeat(lic.key.length);
            
            let days = Math.ceil((new Date(lic.expires) - new Date()) / (1000*60*60*24));
            let status = document.getElementById('userLicenseStatus');
            
            if (days <= 3) {
                status.textContent = `wygasa za ${days} dni`;
            } else {
                status.textContent = 'aktywna';
            }
            
            document.getElementById('userLicenseExpiry').textContent = new Date(lic.expires).toLocaleDateString();
            document.getElementById('userDownloads').textContent = currentUser.downloads || 0;
            
            renderFiles();
        }

        function activateLicense() {
            let key = document.getElementById('licenseKeyInput').value.toUpperCase().trim();
            if (!key) return showToast('wpisz klucz', 'error');

            let lic = keys.find(k => k.key === key);
            if (!lic) return showToast('z≈Çy klucz', 'error');
            if (new Date(lic.expires) < new Date()) return showToast('klucz wygas≈Ç', 'error');
            if (lic.owner && lic.owner !== currentUser.email) return showToast('klucz zajƒôty', 'error');

            lic.owner = currentUser.email;
            currentUser.license = key;
            let idx = users.findIndex(u => u.email === currentUser.email);
            if (idx !== -1) users[idx].license = key;

            logToDiscord('üîë Aktywacja licencji', `**${currentUser.name}** aktywowa≈Ç **${key}**`, 0x3b82f6, [
                { name: 'Email', value: currentUser.email, inline: true },
                { name: 'Klucz', value: key, inline: true }
            ]);

            saveData();
            showLicense(lic);
            showToast('aktywowano', 'success');
        }

        function userLogout() {
            logToDiscord('üëã Wylogowanie', `**${currentUser?.name}** wylogowa≈Ç siƒô`, 0x888888, [
                { name: 'Email', value: currentUser?.email, inline: true }
            ]);

            currentUser = null;
            document.getElementById('userAuth').style.display = 'block';
            document.getElementById('userDashboard').style.display = 'none';
        }

        function renderFiles() {
            let grid = document.getElementById('filesGrid');
            
            if (!currentUser?.license) {
                grid.innerHTML = '<div style="text-align:center; padding:40px; color:#a0b8ff">wpisz klucz licencji</div>';
                return;
            }
            
            let lic = keys.find(k => k.key === currentUser.license);
            if (!lic || new Date(lic.expires) < new Date()) {
                grid.innerHTML = '<div style="text-align:center; padding:40px; color:#a0b8ff">licencja wygas≈Ça</div>';
                return;
            }

            if (!files.length) {
                grid.innerHTML = '<div style="text-align:center; padding:40px; color:#a0b8ff">brak plik√≥w</div>';
                return;
            }

            grid.innerHTML = files.map(f => {
                let size = (f.size / 1024).toFixed(2) + ' KB';
                if (f.size > 1024*1024) size = (f.size / (1024*1024)).toFixed(2) + ' MB';
                
                return `
                    <div class="file-card">
                        <div class="file-name">${escape(f.name)}</div>
                        <div class="file-meta">${size} ‚Ä¢ ${new Date(f.date).toLocaleDateString()}</div>
                        <div class="file-actions">
                            <button onclick="downloadFile('${escape(f.id)}')">pobierz</button>
                            <button onclick="previewFile('${escape(f.id)}')">podglƒÖd</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function downloadFile(id) {
            let f = files.find(f => f.id === id);
            if (!f) return;
            
            if (currentUser) {
                currentUser.downloads++;
                let idx = users.findIndex(u => u.email === currentUser.email);
                if (idx !== -1) users[idx].downloads = currentUser.downloads;
                saveData();
            }

            try {
                let bin = atob(f.data);
                let arr = new Uint8Array(bin.length);
                for (let i = 0; i < bin.length; i++) arr[i] = bin.charCodeAt(i);
                
                let blob = new Blob([arr]);
                let url = URL.createObjectURL(blob);
                let a = document.createElement('a');
                a.href = url;
                a.download = f.name;
                a.click();
                URL.revokeObjectURL(url);
            } catch (e) {}
        }

        function previewFile(id) {
            let f = files.find(f => f.id === id);
            if (!f) return;
            
            let content = 'podglƒÖd niedostƒôpny';
            try {
                let bin = atob(f.data);
                let dec = new TextDecoder('utf-8');
                content = dec.decode(new Uint8Array([...bin].map(c => c.charCodeAt(0))));
                if (content.length > 5000) content = content.substring(0,5000) + '\n\n[...]';
            } catch (e) {}
            
            alert('PodglƒÖd pliku:\n\n' + content.substring(0, 1000));
        }

        function adminLogin() {
            if (!checkLoginAttempts(userIP, 'admin')) {
                return showToast('za du≈ºo pr√≥b, spr√≥buj za 15 minut', 'error');
            }

            if (document.getElementById('adminPass').value === ADMIN_PASS) {
                isAdmin = true;
                document.getElementById('adminAuth').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                
                logToDiscord('‚úÖ Admin login', 'Zalogowano do panelu administratora', 0x00ff00, [
                    { name: 'IP', value: userIP, inline: true }
                ]);

                showToast('zalogowano jako admin', 'success');
                updateUI();
                initUpload();
            } else {
                fetch(DISCORD_WEBHOOK, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        content: `‚ùå NIEUDANE LOGOWANIE ADMINA Z IP: ${userIP}` 
                    })
                });
                showToast('z≈Çe has≈Ço', 'error');
            }
        }

        function adminLogout() {
            isAdmin = false;
            document.getElementById('adminAuth').style.display = 'block';
            document.getElementById('adminDashboard').style.display = 'none';
            
            logToDiscord('üëã Admin logout', 'Wylogowano z panelu administratora', 0x888888, [
                { name: 'IP', value: userIP, inline: true }
            ]);

            showToast('wylogowano', 'info');
        }

        function selectDuration(d, btn) {
            selectedDays = d;
            document.querySelectorAll('.duration-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function generateKey() {
            let name = escape(document.getElementById('licenseName').value) || 'key';
            let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let key = '';
            for (let i=0; i<3; i++) {
                for (let j=0; j<3; j++) key += chars[Math.floor(Math.random()*chars.length)];
                if (i<2) key += '-';
            }

            let now = new Date();
            let exp = new Date(now.setDate(now.getDate() + selectedDays));
            
            keys.push({
                key, name,
                created: new Date().toISOString().split('T')[0],
                expires: exp.toISOString().split('T')[0],
                duration: selectedDays,
                owner: null
            });

            logToDiscord('üîë Nowy klucz', `Wygenerowano **${key}** (${selectedDays} dni)`, 0x3b82f6, [
                { name: 'Nazwa', value: name, inline: true }
            ]);

            saveData();
            document.getElementById('licenseName').value = '';
            renderKeys();
            showToast('klucz wygenerowany', 'success');
        }

        function renderKeys() {
            let list = document.getElementById('keyList');
            if (!keys.length) {
                list.innerHTML = '<div style="color:#a0b8ff; padding:20px; text-align:center">brak kluczy</div>';
                return;
            }

            list.innerHTML = keys.slice().reverse().map(k => `
                <div class="item-row">
                    <div>
                        <div class="item-code">${k.key}</div>
                        <div class="item-info">${k.name} ‚Ä¢ do ${k.expires} ‚Ä¢ ${k.owner ? 'u≈ºywany' : 'dostƒôpny'}</div>
                    </div>
                    <button class="small danger" onclick="deleteKey('${k.key}')">usu≈Ñ</button>
                </div>
            `).join('');
        }

        function deleteKey(key) {
            if (confirm('usunƒÖƒá ten klucz?')) {
                keys = keys.filter(k => k.key !== key);
                
                logToDiscord('üóëÔ∏è Usuniƒôto klucz', `Usuniƒôto **${key}**`, 0xff0000);

                saveData();
                renderKeys();
            }
        }

        function generateCoupon() {
            let code = escape(document.getElementById('couponCode').value).toUpperCase();
            let val = parseInt(document.getElementById('couponValue').value);

            if (!code) code = 'CODE' + Math.floor(Math.random() * 10000);
            if (!val || val < 1 || val > 100) return showToast('wpisz 1-100', 'error');

            let now = new Date();
            let exp = new Date(now.setDate(now.getDate() + 30));

            coupons.push({
                code, value: val,
                created: new Date().toISOString().split('T')[0],
                expires: exp.toISOString().split('T')[0],
                used: false
            });

            logToDiscord('üé´ Nowy kod', `Wygenerowano **${code}** (${val}%)`, 0xffa500, [
                { name: 'Wa≈ºny do', value: exp.toISOString().split('T')[0], inline: true }
            ]);

            saveData();
            document.getElementById('couponCode').value = '';
            document.getElementById('couponValue').value = '';
            renderCoupons();
            showToast('kod wygenerowany', 'success');
        }

        function renderCoupons() {
            let list = document.getElementById('couponList');
            if (!coupons.length) {
                list.innerHTML = '<div style="color:#a0b8ff; padding:20px; text-align:center">brak kod√≥w</div>';
                return;
            }

            list.innerHTML = coupons.slice().reverse().map(c => `
                <div class="item-row">
                    <div>
                        <div class="item-code">${c.code}</div>
                        <div class="item-info">${c.value}% ‚Ä¢ do ${c.expires} ‚Ä¢ ${c.used ? 'u≈ºyty' : 'aktywny'}</div>
                    </div>
                    <button class="small danger" onclick="deleteCoupon('${c.code}')">usu≈Ñ</button>
                </div>
            `).join('');
        }

        function deleteCoupon(code) {
            if (confirm('usunƒÖƒá ten kod?')) {
                coupons = coupons.filter(c => c.code !== code);
                
                logToDiscord('üóëÔ∏è Usuniƒôto kod', `Usuniƒôto **${code}**`, 0xff0000);

                saveData();
                renderCoupons();
            }
        }

        function createAdmin() {
            if (!isAdmin) return;

            let email = document.getElementById('newAdminEmail').value.trim().toLowerCase();
            let name = document.getElementById('newAdminName').value.trim();
            let role = document.getElementById('newAdminRole').value;

            if (!email || !name) {
                showToast('wype≈Çnij pola', 'error');
                return;
            }

            let userIndex = users.findIndex(u => u.email === email);
            
            if (userIndex === -1) {
                let password = Math.random().toString(36).slice(-8);
                users.push({
                    name: name,
                    email: email,
                    password: btoa(password),
                    role: role,
                    ip: 'system',
                    license: null,
                    downloads: 0,
                    registered: new Date().toISOString().split('T')[0],
                    lastLogin: null
                });
                
                logToDiscord(
                    role === 'ceo' ? 'üëë Nowy CEO' : 'üõ°Ô∏è Nowy administrator',
                    `Utworzono konto dla **${name}** (${email})`,
                    role === 'ceo' ? 0xffd700 : 0x3b82f6,
                    [
                        { name: 'Ranga', value: role === 'ceo' ? 'CEO' : 'Administrator', inline: true },
                        { name: 'Has≈Ço', value: `||${password}||`, inline: true }
                    ]
                );
                
                showToast(`utworzono ${role}: ${email}`, 'success');
            } else {
                users[userIndex].role = role;
                users[userIndex].name = name;
                
                logToDiscord(
                    'üîÑ Zmiana rangi',
                    `**${name}** (${email}) otrzyma≈Ç rangƒô ${role === 'ceo' ? 'CEO' : 'Administrator'}`,
                    0xffa500,
                    [{ name: 'Nowa ranga', value: role === 'ceo' ? 'CEO' : 'Administrator', inline: true }]
                );
                
                showToast(`zmieniono rangƒô ${email} na ${role}`, 'success');
            }

            saveData();
            
            document.getElementById('newAdminEmail').value = '';
            document.getElementById('newAdminName').value = '';
            renderAdminUsers();
        }

        function renderAdminUsers() {
            let list = document.getElementById('adminUsersList');
            if (!users.length) {
                list.innerHTML = '<div style="color:#a0b8ff; padding:30px; text-align:center">brak u≈ºytkownik√≥w</div>';
                return;
            }

            list.innerHTML = users.slice().reverse().map(u => `
                <div class="user-row">
                    <div data-label="nazwa">${escape(u.name)}</div>
                    <div data-label="email">${escape(u.email)}</div>
                    <div data-label="ranga"><span class="role-badge ${u.role}">${u.role === 'ceo' ? 'CEO' : u.role === 'admin' ? 'ADMIN' : 'USER'}</span></div>
                    <div data-label="ip"><span class="ip">${u.ip || 'nieznane'}</span></div>
                    <div data-label="licencja">${u.license ? '‚úÖ' : '‚ùå'}</div>
                    <div data-label="pobra≈Ñ">${u.downloads || 0}</div>
                    <div data-label="akcje">
                        ${u.role !== 'ceo' ? `<button class="small danger" onclick="deleteUser('${u.email}')">usu≈Ñ</button>` : '-'}
                    </div>
                </div>
            `).join('');
        }

        function deleteUser(email) {
            if (!isAdmin) return;
            if (email === 'ceo@ltc.com') {
                showToast('nie mo≈ºna usunƒÖƒá CEO', 'error');
                return;
            }
            
            if (confirm(`usunƒÖƒá u≈ºytkownika ${email}?`)) {
                users = users.filter(u => u.email !== email);
                
                logToDiscord('üóëÔ∏è Usuniƒôto u≈ºytkownika', `Usuniƒôto konto **${email}**`, 0xff0000);

                saveData();
                renderAdminUsers();
            }
        }

        function initUpload() {
            let drop = document.getElementById('dropZone');
            let input = document.getElementById('fileInput');
            
            drop.addEventListener('dragover', e => e.preventDefault());
            drop.addEventListener('drop', e => {
                e.preventDefault();
                if (isAdmin) handleFile(e.dataTransfer.files);
            });
            input.addEventListener('change', () => {
                if (isAdmin) handleFile(input.files);
            });
        }

        function handleFile(f) {
            if (!f.length) return;
            let file = f[0];
            
            if (file.size > 50 * 1024 * 1024) {
                showToast('plik za du≈ºy (max 50MB)', 'error');
                return;
            }
            
            uploadedFile = file;
            let info = document.getElementById('fileInfo');
            info.style.display = 'flex';
            info.innerHTML = `<span class="item-code">${file.name}</span> <span class="item-info">${(file.size/1024).toFixed(2)} KB</span>`;
            document.getElementById('uploadBtn').disabled = false;
        }

        async function uploadFile() {
            if (!uploadedFile || !isAdmin) return;

            let name = escape(document.getElementById('fileName').value) || uploadedFile.name;

            let reader = new FileReader();
            reader.onload = async (e) => {
                files.unshift({
                    id: Date.now().toString(36) + Math.random().toString(36).substring(2),
                    name: name,
                    size: uploadedFile.size,
                    date: new Date().toISOString(),
                    data: e.target.result.split(',')[1]
                });

                logToDiscord('üìÅ Nowy plik', `Dodano **${name}**`, 0x3b82f6, [
                    { name: 'Rozmiar', value: (uploadedFile.size/1024).toFixed(2) + ' KB', inline: true }
                ]);

                await saveData();

                document.getElementById('fileName').value = '';
                document.getElementById('fileInfo').style.display = 'none';
                document.getElementById('uploadBtn').disabled = true;
                uploadedFile = null;

                renderAdminFiles();
                if (currentUser) renderFiles();
                showToast('plik opublikowany', 'success');
            };
            reader.readAsDataURL(uploadedFile);
        }

        function renderAdminFiles() {
            let list = document.getElementById('adminFilesList');
            if (!files.length) {
                list.innerHTML = '<div style="color:#a0b8ff; padding:30px; text-align:center">brak plik√≥w</div>';
                return;
            }

            list.innerHTML = files.map(f => `
                <div class="item-row">
                    <div>
                        <div class="item-code">${escape(f.name)}</div>
                        <div class="item-info">${(f.size/1024).toFixed(2)} KB ‚Ä¢ ${new Date(f.date).toLocaleString()}</div>
                    </div>
                    <div style="display:flex; gap:8px">
                        <button class="small" onclick="previewFile('${escape(f.id)}')">podglƒÖd</button>
                        <button class="small danger" onclick="deleteFile('${escape(f.id)}')">usu≈Ñ</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteFile(id) {
            if (confirm('usunƒÖƒá ten plik?')) {
                let f = files.find(f => f.id === id);
                files = files.filter(f => f.id !== id);
                
                logToDiscord('üóëÔ∏è Usuniƒôto plik', `Usuniƒôto **${f?.name}**`, 0xff0000);

                saveData();
                renderAdminFiles();
            }
        }

        function showContact() {
            showToast('discord: krvl_keine', 'info');
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            setInterval(loadData, 30000);
        });
    </script>
</body>
      </html>
